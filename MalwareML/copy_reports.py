import os
import shutil

# Create empty "reportsOnly" folder in analyses folder
# Run this program in analyses folder
def copy_reports():
    # cuckoo_dir = os.curdir
    # storage_dir = os.path.join(cuckoo_dir, "storage")
    analyses_dir = os.curdir
    cuckoo_reports_dir = os.path.join(analyses_dir, "nsrlCuckooReportsOnly")

    # cuckoo_dir = os.curdir
    # storage_dir = os.path.join(cuckoo_dir, "storage")
    # analyses_dir = os.path.join(storage_dir, "analyses")
    # cuckoo_reports_dir = os.path.join(cuckoo_dir, "cuckoo_reports2")

    for analysis_dir in os.listdir(analyses_dir):
        #print analysis_dir
        full_analysis_dir = os.path.join(analyses_dir, analysis_dir)
        reports_dir = os.path.join(full_analysis_dir, "reports")
        if "reports" in os.listdir(full_analysis_dir):
            src_file = os.path.join(reports_dir, "report.json")
            shutil.copy(src_file,cuckoo_reports_dir)

            dst_file = os.path.join(cuckoo_reports_dir, "report.json")
            dst_file_rename = os.path.join(cuckoo_reports_dir, "nsrl_report_"+analysis_dir+".json")
            os.rename(dst_file, dst_file_rename)
	    print "Renamed " + "nsrl_report_"+analysis_dir+".json" + " from " + src_file
        

copy_reports()
